#  ██████╗ ██████╗ ███╗   ██╗███████╗██╗ ██████╗ 
# ██╔════╝██╔═══██╗████╗  ██║██╔════╝██║██╔════╝ 
# ██║     ██║   ██║██╔██╗ ██║█████╗  ██║██║  ███╗
# ██║     ██║   ██║██║╚██╗██║██╔══╝  ██║██║   ██║
# ╚██████╗╚██████╔╝██║ ╚████║██║     ██║╚██████╔╝
#  ╚═════╝ ╚═════╝ ╚═╝  ╚═══╝╚═╝     ╚═╝ ╚═════╝ 
#config

# Pywal Import
source = ~/.cache/wal/colorsHyprland.conf

# CONTEXT VARIABLES
$terminal = kitty
$fileManager = dolphin
$menu = wofi --show drun
$scriptsDir = ~/.config/hypr/scripts
$mainMod = SUPER

# MONITORS

# hyprdynamicmonitors
source = ~/.config/hypr/monitors.conf

# AUTO
# monitor=HDMI-A-1,preferred,auto,1,vrr,1
# monitor=DP-9,preferred,auto,1,vrr,1
# monitor=DP-10,preferred,auto,1,vrr,1

# 2305 Ridgeway Drive
# monitor=HDMI-A-1,1920x1080@100,-3840x0,1,vrr,1
# monitor=DP-9,1920x1080@100,-1920x0,1,vrr,1
# monitor=DP-10,1920x1080@100,-1920x0,1,vrr,1

# Laptop Screen
# monitor=eDP-1,2560x1600@90,0x0,1.25,vrr,1

# unscale XWayland
xwayland {
	force_zero_scaling = true
}
# EVIRONMENT VARIABLES
# Set Nvidia Driver & Library // setting AMD as default
env = DRI_PRIME,0
env = __NV_PRIME_RENDER_OFFLOAD,0
env = __GLX_VENDOR_LIBRARY_NAME,mesa
# Select Priority GPU
# env = AQ_DRM_DEVICES,/dev/dri/card0:/dev/dri/card1
# cursor {
#     no_hardware_cursors = true
#   }
misc:vfr = true

# INPUT
input:touchpad:clickfinger_behavior = 1 
device {
    name = syna0a00:00-06cb:cf00-touchpad 
    accel_profile=adaptive
  }

input {
    kb_layout = us
    kb_options = grp:toggle, fkeys:basic_13-24

    follow_mouse = 1

    force_no_accel = 0

    accel_profile=flat
    touchpad {
        natural_scroll = yes
	scroll_factor = 0.2
	disable_while_typing = no
    }

    sensitivity = 0 # -1.0 - 1.0, 0 means no modification.
}

# ███████╗████████╗ █████╗ ██████╗ ████████╗██╗   ██╗██████╗ 
# ██╔════╝╚══██╔══╝██╔══██╗██╔══██╗╚══██╔══╝██║   ██║██╔══██╗
# ███████╗   ██║   ███████║██████╔╝   ██║   ██║   ██║██████╔╝
# ╚════██║   ██║   ██╔══██║██╔══██╗   ██║   ██║   ██║██╔═══╝ 
# ███████║   ██║   ██║  ██║██║  ██║   ██║   ╚██████╔╝██║     
# ╚══════╝   ╚═╝   ╚═╝  ╚═╝╚═╝  ╚═╝   ╚═╝    ╚═════╝ ╚═╝     
#startup

# APPS
# exec-once=/usr/lib/pam_kwallet_init
exec-once = elephant
exec-once = waybar
exec-once = hyprsunset
exec = systemctl --user start hyprpolkitagent
# exec-once = jamesdsp -t
# exec-once = sh -c "'/opt/Mullvad VPN/mullvad-vpn' %U"
exec-once = nm-applet --indicator
exec-once = blueman-applet
# exec-once = swaync
# swaync disable nvidia
exec-once = env DRI_PRIME=0 __NV_PRIME_RENDER_OFFLOAD=0 __GLX_VENDOR_LIBRARY_NAME=mesa VK_ICD_FILENAMES="" VK_LAYER_PATH="" swaync
exec-once = hypridle
exec-once = swww-daemon
exec-once = nwg-look -a
exec-once = fcitx5
exec-once = hyprpm reload -n
exec-once = hyprdynamicmonitors run
exec-once = quickshell -p ~/.config/quickshell/qs-hyprview/

# MISC
exec = wpctl settings --save bluetooth.autoswitch-to-headset-profile false # disable hands-free 
exec-once = cat ~/.cache/wal/sequences
# exec-once = hyprswitch init --workspaces-per-row 4 --size-factor 4.5 --custom-css ~/.config/hyprsw/hyprsw.css &
# hot fix to 0.43 nonsense. may not be necessary in the future
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = dbus-update-activation-environment --systemd --all
exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
# exec = gsettings set org.gnome.desktop.interface gtk-theme "Graphite-Dark"   # for GTK3 apps
# exec = gsettings set org.gnome.desktop.interface color-scheme "prefer-dark"   # for GTK4 apps
env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_MENU_PREFIX,arch-
env = GDK_BACKEND,wayland        # GTK apps
env = SDL_VIDEODRIVER,wayland    # SDL-based apps (e.g., games, emulators)
env = CLUTTER_BACKEND,wayland    # GNOME Clutter (used by some apps)
env = MOZ_ENABLE_WAYLAND,1       # Firefox


# ██╗      ██████╗  ██████╗ ██╗  ██╗███████╗
# ██║     ██╔═══██╗██╔═══██╗██║ ██╔╝██╔════╝
# ██║     ██║   ██║██║   ██║█████╔╝ ███████╗
# ██║     ██║   ██║██║   ██║██╔═██╗ ╚════██║
# ███████╗╚██████╔╝╚██████╔╝██║  ██╗███████║
# ╚══════╝ ╚═════╝  ╚═════╝ ╚═╝  ╚═╝╚══════╝
#looks

# BORDER CUSTOMIZATION
general {

    # gaps_in = 4
    # gaps_out = 8
    gaps_in = 2
    gaps_out = 4
    border_size = 2

  col.active_border = $color4 $color5 45deg
  col.inactive_border = $color1

    layout = master # dwindle // master

    allow_tearing = false
}

decoration {

    # rounding = 10
    rounding = 5
    dim_around = 0.5 
    blur {
        popups=true
        enabled = true
        size = 10
        passes = 3
        new_optimizations = true
        ignore_opacity = true
        noise = 0.10
        brightness = 0.90
    }

    # qs-hyprview
    layerrule = match:namespace quickshell:expose, dim_around 1
    layerrule = match:namespace quickshell:expose, blur 1
    layerrule = match:namespace quickshell:expose, animation fadeIn

    
    # wofi
    layerrule = match:namespace wofi, blur 1
    layerrule = match:namespace wofi, ignore_alpha 0.1
    layerrule = match:namespace wofi, animation slide top

    # hyprswitch
    layerrule = match:namespace hyprswitch, blur 1
    layerrule = match:namespace logout_dialog, blur 1

    # swaync-control-center
    layerrule = match:namespace swaync-control-center, blur 1
    layerrule = match:namespace swaync-notification-window, blur 1
    layerrule = match:namespace swaync-control-center, ignore_alpha 0.1
    layerrule = match:namespace swaync-notification-window, ignore_alpha 0.1
    layerrule = match:namespace swaync-control-center, animation slide right
    layerrule = match:namespace swaync-notification-window, animation slide right
    layerrule = match:namespace swaync-notification-window, order 1

    # rofi
    layerrule = match:namespace rofi, blur 1
    layerrule = match:namespace rofi, ignore_alpha 0.1
    layerrule = match:namespace rofi, animation popin

    # waybar & hyprpanel
    layerrule = match:namespace bar-0, blur 1
    layerrule = match:namespace bar-1, blur 1
    layerrule = match:namespace bar-2, blur 1
    layerrule = match:namespace waybar, blur 1
    layerrule = match:namespace waybar, order 0

    shadow {
        enabled = false
        range = 14
        render_power = 3
        offset = 0, 0
      }
}

animations {
    enabled = yes

    bezier = myBezier, 0.05, 0.9, 0.1, 1.05

    animation = windows, 1, 5, myBezier, slide
    animation = windowsOut, 1, 5, myBezier, slide
    animation = border, 1, 10, default
    animation = borderangle, 1, 8, default
    animation = fade, 1, 7, default
    animation = workspaces, 1, 6, default
}

dwindle {
    pseudotile = yes # master switch for pseudotiling. Enabling is bound to mainMod + P in the keybinds section below
    preserve_split = yes # you probably want this
}

master {
    #new_is_master = true
}

gestures {
    gesture = 3, horizontal, workspace
}

misc {
    force_default_wallpaper = 0 # Set to 0 or 1 to disable the anime mascot wallpapers
    disable_hyprland_logo = true
    focus_on_activate = true
}

cursor {
    no_warps = false
    persistent_warps = true
  }

# CURSOR AND THEME
env = HYPRCURSOR_SIZE,24
env = HYPRCUSOR_THEME,rose-pine-hyprcursor
env = XCURSOR_THEME,rose-pine-cursor
env = XCURSOR_SIZE,24
env = QT_QPA_PLATFORM,wayland
env = QT_STYLE_OVERRIDE,kvantum
env = QT_QPA_PLATFORMTHEME,qt6ct
env = GTK_THEME, Graphite-Dark

# ██╗    ██╗██╗███╗   ██╗      ██████╗ ██╗   ██╗██╗     ███████╗
# ██║    ██║██║████╗  ██║      ██╔══██╗██║   ██║██║     ██╔════╝
# ██║ █╗ ██║██║██╔██╗ ██║█████╗██████╔╝██║   ██║██║     █████╗  
# ██║███╗██║██║██║╚██╗██║╚════╝██╔══██╗██║   ██║██║     ██╔══╝  
# ╚███╔███╔╝██║██║ ╚████║      ██║  ██║╚██████╔╝███████╗███████╗
#  ╚══╝╚══╝ ╚═╝╚═╝  ╚═══╝      ╚═╝  ╚═╝ ╚═════╝ ╚══════╝╚══════╝
#winrule, win-rule

# waypaper
windowrule {
    name = waypaper
    match:initial_class = waypaper

    opacity = 0.8
    float = 1

    size = 700 800
    pin = 1
  }

#bitwarden
exec-once = sh $HOME/.config/hypr/scripts/bitwardenfloat.sh
windowrule {
    name = bitwarden
    match:title = ^(.*Bitwarden.*)$

    no_screen_share = 1
    stay_focused = 1
  }

#thunar
windowrule {
    name = thunar
    match:initial_class = thunar

    opacity = 0.88
  }

#dolphin
windowrule {
    name = dolphin
    match:initial_class = org.kde.dolphin

    opacity = 0.8
  }
windowrule {
    name = ark
    match:initial_class = org.kde.ark

    opacity = 0.8
  }

#obsidian
# windowrule = opacity 0.88 override 0.88 override,initialClass:^(obsidian)$

#lxtask
windowrule {
    name = lxtask
    match:class = Lxtask

    opacity = 0.6
    float = 1
    size = 700 700
    move = 61.1% 4.2%
    pin = 1
  }

#mission center
windowrule {
    name = missioncenter
    match:class = io.missioncenter.MissionCenter

    opacity = 0.7
    float = 1
    move = 910 35
    size = 1000 530
    pin = 1
  }

#VScode
windowrule {
    name = VScode
    match:class = Code

    opacity = 0.88
  }

#Pavucontrol
windowrule {
    name = pavucontrol
    match:class = org.pulseaudio.pavucontrol

    float = 1
    move = 1200 35
    size = 575 400
    opacity = 0.6
    pin = 1
  }

#blueman-manager
windowrule {
    name = blueman-manager
    match:class = blueman-manager

    float = 1
    move = 10 35
    size = 650 400
    opacity = 0.6
    pin = 1
  }

#Network Manager
windowrule {
    name = network-manager
    match:class = nm-connection-editor

    float = 1
    move = 10 35
    size = 650 400
    opacity = 0.6
  }

# Jamesdsp
windowrule {
    name = jamesdsp
    match:class = jamesdsp

    float = 1
    move = 10 35
    size = 650 400
    opacity = 0.88
  }

#Mullvad
windowrule {
    name = mullvad-vpn
    match:class = Mullvad VPN

    move = 40 35
    opacity = 0.88
    pin = 1
  }

#hyprdynamicmonitors
windowrule {
    name = hyprdynamicmonitors
    match:title = hyprdynamicmonitors

    float = 1
  }

# ██████╗ ██╗███╗   ██╗██████╗ ███████╗
# ██╔══██╗██║████╗  ██║██╔══██╗██╔════╝
# ██████╔╝██║██╔██╗ ██║██║  ██║███████╗
# ██╔══██╗██║██║╚██╗██║██║  ██║╚════██║
# ██████╔╝██║██║ ╚████║██████╔╝███████║
# ╚═════╝ ╚═╝╚═╝  ╚═══╝╚═════╝ ╚══════╝
#binds

bind = $mainMod, Q, exec, $terminal
bind = $mainMod, C, killactive, 
bind = $mainMod, E, exec, $fileManager
bind = CTRL SHIFT, escape, exec, killall missioncenter || GTK_THEME=Adwaita:dark missioncenter
bind = $mainMod, G, exec, hyprctl dispatch togglefloating && hyprctl dispatch resizeactive exact 900 680 && hyprctl dispatch centerwindow
bind = $mainMod, F, exec, hyprctl dispatch fullscreen 1
bind = $mainMod SHIFT, F, exec, hyprctl dispatch fullscreenstate 3
bind = $mainMod, R, exec, killall rofi || rofi -modi "calc,drun" -show drun
bind = $mainMod, R, exec, killall walker || walker
# bind = ALT, TAB, workspace, previous
bind = ALT, TAB, exec, quickshell ipc -p ~/.config/quickshell/qs-hyprview/ call expose toggle bands
bind = $mainMod, O, exec, obsidian
# bind = $mainMod, S, togglesplit, # dwindle
bindr = $mainMod, W, exec, killall waybar || waybar
# bindr = $mainMod, W, exec, hyprpanel -q || hyprpanel
bind = SUPER, X, exec, waypaper --random
bind = SUPER, Z, exec, killall waypaper || waypaper
bindrn = ,escape, exec, hyprswitch close --kill
bindrn = ,escape, exec, killall waypaper
bind = $mainMod, S, layoutmsg, swapwithmaster master
bind = $mainMod, M, exec, kill $(hyprctl -j clients | jq -r '.[] | select(.title|test("^.*hyprdynamicmonitors$")) | .pid') || kitty --title hyprdynamicmonitors --class hyprdynamicmonitors --detach -e hyprdynamicmonitors tui

# SCREENSHOT & COLOR-PICK
bind = $mainMod SHIFT, S, exec, sh ~/.config/hypr/scripts/screenshot.sh rf
#bind = , Print C, exec, sh ~/.config/hypr/scripts/screenshot.sh rc
#bind = CTRL, Print, exec, sh ~/.config/hypr/scripts/screenshot.sh ri
#bind = SHIFT, Print, exec, sh ~/.config/hypr/scripts/screenshot.sh sc
#bind = SUPER SHIFT, Print, exec, sh ~/.config/hypr/scripts/screenshot.sh sf
#bind = CTRL SHIFT, Print, exec, sh ~/.config/hypr/scripts/screenshot.sh si
bind = $mainMod ALT SHIFT, S, exec, sh ~/.config/hypr/scripts/screenshot.sh p

# Power and Management Binds
bind = ,  XF86PowerOff, exec, wlogout -b 5 -T 500 -B 500
# bindl=,switch:on:Lid Switch, exec, sh ~/.config/hypr/scripts/lid_internal_display_off.sh
bindl=,switch:on:Lid Switch, exec, systemctl suspend
# bindl=,switch:off:Lid Switch, exec, sh ~/.config/hypr/scripts/lid_internal_display_on.sh
bind = $mainMod, L, exec, wlogout -b 5 -T 500 -B 500

# Move focus with mainMod + arrow keys
bind = $mainMod, left, movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up, movefocus, u
bind = $mainMod, down, movefocus, d

# Move window
bind = $mainMod SHIFT, up, movewindow, u
bind = $mainMod SHIFT, down, movewindow, d

# Move Window Over monitors
bind = $mainMod SHIFT, right, movewindow, mon:+1
bind = $mainMod SHIFT, left, movewindow, mon:-1

# managed by split-monitor-workspaces 
# Switch workspaces with mainMod + [0-9]
# bind = $mainMod, 1, workspace, 1
# bind = $mainMod, 2, workspace, 2
# bind = $mainMod, 3, workspace, 3
# bind = $mainMod, 4, workspace, 4
# bind = $mainMod, 5, workspace, 5
# bind = $mainMod, 6, workspace, 6
# bind = $mainMod, 7, workspace, 7
# bind = $mainMod, 8, workspace, 8
# bind = $mainMod, 9, workspace, 9
# bind = $mainMod, 0, workspace, 10

# Move active window to a workspace with mainMod + SHIFT + [0-9]
# bind = $mainMod SHIFT, 1, movetoworkspace, 1
# bind = $mainMod SHIFT, 2, movetoworkspace, 2
# bind = $mainMod SHIFT, 3, movetoworkspace, 3
# bind = $mainMod SHIFT, 4, movetoworkspace, 4
# bind = $mainMod SHIFT, 5, movetoworkspace, 5
# bind = $mainMod SHIFT, 6, movetoworkspace, 6
# bind = $mainMod SHIFT, 7, movetoworkspace, 7
# bind = $mainMod SHIFT, 8, movetoworkspace, 8
# bind = $mainMod SHIFT, 9, movetoworkspace, 9
# bind = $mainMod SHIFT, 0, movetoworkspace, 10

# Scroll through existing workspaces with mainMod + scroll
bind = $mainMod, mouse_down, workspace, +1
bind = $mainMod, mouse_up, workspace, -1

# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod ALT, mouse:272, resizewindow

# Media Keys

#pamixer
bindel = , XF86AudioRaiseVolume, exec, pamixer -i 5 @DEFAULT_SINK@
bindel = , XF86AudioLowerVolume, exec, pamixer -d 5 @DEFAULT_AUDIO_SINK@
bindl = , XF86AudioMute, exec, pamixer -t @DEFAULT_SINK@
bindl = , XF86AudioMicMute, exec, bash -c 'pamixer -t --default-source; state=$(pamixer --default-source --get-mute); notify-send "Mic: $( [ "$state" = true ] && echo Muted || echo On )"'

bindl = , xf86AudioNext, exec, playerctl next
bindl = , xf86AudioPrev, exec, playerctl previous
bindl = , xf86AudioPlay, exec, playerctl play
bindl = , xf86AudioPause, exec, playerctl pause

bindel = , xf86MonBrightnessUp, exec, brightnessctl set 5%+
bindel = , xf86MonBrightnessDown, exec, brightnessctl set 5%-

# ██████╗ ██╗     ██╗   ██╗ ██████╗ ██╗███╗   ██╗███████╗
# ██╔══██╗██║     ██║   ██║██╔════╝ ██║████╗  ██║██╔════╝
# ██████╔╝██║     ██║   ██║██║  ███╗██║██╔██╗ ██║███████╗
# ██╔═══╝ ██║     ██║   ██║██║   ██║██║██║╚██╗██║╚════██║
# ██║     ███████╗╚██████╔╝╚██████╔╝██║██║ ╚████║███████║
# ╚═╝     ╚══════╝ ╚═════╝  ╚═════╝ ╚═╝╚═╝  ╚═══╝╚══════╝
# plugins

# split-monitor-workspaces:
plugin {
    hyprsplit {
        num_workspaces = 10
    }
}

$mainMod = SUPER
# Switch workspaces with mainMod + [0-5]
bind = $mainMod, 1, split:workspace, 1
bind = $mainMod, 2, split:workspace, 2
bind = $mainMod, 3, split:workspace, 3
bind = $mainMod, 4, split:workspace, 4
bind = $mainMod, 5, split:workspace, 5
bind = $mainMod, 6, split:workspace, 6
bind = $mainMod, 7, split:workspace, 7
bind = $mainMod, 8, split:workspace, 8
bind = $mainMod, 9, split:workspace, 9
bind = $mainMod, 0, split:workspace, 10
# bind = $mainMod, bracketleft, split:workspace, +1 
# bind = $mainMod, bracketright, split:workspace, -1 
bind = $mainMod, mouse:276, split:workspace, +1 
bind = $mainMod, mouse:275, split:workspace, -1 
# Move active window to a workspace with mainMod + SHIFT + [0-5]
bind = $mainMod SHIFT, 1, split:movetoworkspacesilent, 1
bind = $mainMod SHIFT, 2, split:movetoworkspacesilent, 2
bind = $mainMod SHIFT, 3, split:movetoworkspacesilent, 3
bind = $mainMod SHIFT, 4, split:movetoworkspacesilent, 4
bind = $mainMod SHIFT, 5, split:movetoworkspacesilent, 5
bind = $mainMod SHIFT, 6, split:movetoworkspacesilent, 6
bind = $mainMod SHIFT, 7, split:movetoworkspacesilent, 7
bind = $mainMod SHIFT, 8, split:movetoworkspacesilent, 8
bind = $mainMod SHIFT, 9, split:movetoworkspacesilent, 9
bind = $mainMod SHIFT, 0, split:movetoworkspacesilent, 10
# bind = $mainMod SHIFT, bracketleft, split:movetoworkspacesilent, +1 
# bind = $mainMod SHIFT, bracketright, split:movetoworkspacesilent, -1 
bind = $mainMod SHIFT, mouse:276, split:movetoworkspacesilent, +1 
bind = $mainMod SHIFT, mouse:275, split:movetoworkspacesilent, -1 

# hyprspace
# bind = ALT, TAB, overview:toggle
# bindrn = , escape, overview:close

plugin {
    overview {
        # onBottom = true
      }
  }
